<!doctype html><html lang=en dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Setting Up Lxd Lxc and K3s With a Basic Nginx Test Service | The world wide web, AI, me and my learnings!</title><meta name=keywords content><meta name=description content="This guide details how to set up a lightweight Kubernetes (K3s) cluster using LXD and LXC containers on an Ubuntu 24.04 server, followed by deploying a basic NGINX test service with NGINX Ingress. These steps were tested on an Oracle Cloud Free Tier instance named maata-paarvati with 4 CPUs and 24 GB RAM.
Prerequisites

An Ubuntu 24.04 server (e.g., Oracle Cloud Free Tier instance).
Root or sudo access.
Network configured to allow TCP ports 80, 443, and 6443.


1. Install LXD


Install LXD via Snap:"><meta name=author content="Shashank Rawlani"><link rel=canonical href=https://blog.rawlani.com/posts/setting-up-lxd-lxc-and-k3s-with-a-basic-nginx-test-service/><link crossorigin=anonymous href=/assets/css/stylesheet.6299a0e01c4910bbb2ff3038aa93c8b60bd9b62279f6c601f3d1093d4dab4a0c.css integrity="sha256-Ypmg4BxJELuy/zA4qpPItgvZtiJ59sYB89EJPU2rSgw=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.rawlani.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.rawlani.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.rawlani.com/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.rawlani.com/apple-touch-icon.png><link rel=mask-icon href=https://blog.rawlani.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://blog.rawlani.com/posts/setting-up-lxd-lxc-and-k3s-with-a-basic-nginx-test-service/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>localStorage.getItem("pref-theme")==="dark"?document.querySelector("html").dataset.theme="dark":localStorage.getItem("pref-theme")==="light"?document.querySelector("html").dataset.theme="light":window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-JWC1DXNDB5"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-JWC1DXNDB5")</script><meta property="og:url" content="https://blog.rawlani.com/posts/setting-up-lxd-lxc-and-k3s-with-a-basic-nginx-test-service/"><meta property="og:site_name" content="The world wide web, AI, me and my learnings!"><meta property="og:title" content="Setting Up Lxd Lxc and K3s With a Basic Nginx Test Service"><meta property="og:description" content="This guide details how to set up a lightweight Kubernetes (K3s) cluster using LXD and LXC containers on an Ubuntu 24.04 server, followed by deploying a basic NGINX test service with NGINX Ingress. These steps were tested on an Oracle Cloud Free Tier instance named maata-paarvati with 4 CPUs and 24 GB RAM.
Prerequisites An Ubuntu 24.04 server (e.g., Oracle Cloud Free Tier instance). Root or sudo access. Network configured to allow TCP ports 80, 443, and 6443. 1. Install LXD Install LXD via Snap:"><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-04-21T17:35:27+05:30"><meta property="article:modified_time" content="2025-04-21T17:35:27+05:30"><meta name=twitter:card content="summary"><meta name=twitter:title content="Setting Up Lxd Lxc and K3s With a Basic Nginx Test Service"><meta name=twitter:description content="This guide details how to set up a lightweight Kubernetes (K3s) cluster using LXD and LXC containers on an Ubuntu 24.04 server, followed by deploying a basic NGINX test service with NGINX Ingress. These steps were tested on an Oracle Cloud Free Tier instance named maata-paarvati with 4 CPUs and 24 GB RAM.
Prerequisites

An Ubuntu 24.04 server (e.g., Oracle Cloud Free Tier instance).
Root or sudo access.
Network configured to allow TCP ports 80, 443, and 6443.


1. Install LXD


Install LXD via Snap:"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.rawlani.com/posts/"},{"@type":"ListItem","position":2,"name":"Setting Up Lxd Lxc and K3s With a Basic Nginx Test Service","item":"https://blog.rawlani.com/posts/setting-up-lxd-lxc-and-k3s-with-a-basic-nginx-test-service/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Setting Up Lxd Lxc and K3s With a Basic Nginx Test Service","name":"Setting Up Lxd Lxc and K3s With a Basic Nginx Test Service","description":"This guide details how to set up a lightweight Kubernetes (K3s) cluster using LXD and LXC containers on an Ubuntu 24.04 server, followed by deploying a basic NGINX test service with NGINX Ingress. These steps were tested on an Oracle Cloud Free Tier instance named maata-paarvati with 4 CPUs and 24 GB RAM.\nPrerequisites An Ubuntu 24.04 server (e.g., Oracle Cloud Free Tier instance). Root or sudo access. Network configured to allow TCP ports 80, 443, and 6443. 1. Install LXD Install LXD via Snap:\n","keywords":[],"articleBody":"This guide details how to set up a lightweight Kubernetes (K3s) cluster using LXD and LXC containers on an Ubuntu 24.04 server, followed by deploying a basic NGINX test service with NGINX Ingress. These steps were tested on an Oracle Cloud Free Tier instance named maata-paarvati with 4 CPUs and 24 GB RAM.\nPrerequisites An Ubuntu 24.04 server (e.g., Oracle Cloud Free Tier instance). Root or sudo access. Network configured to allow TCP ports 80, 443, and 6443. 1. Install LXD Install LXD via Snap:\nsudo snap install lxd Initialize LXD:\nUse default settings for a simple setup:\nsudo lxd init --auto This creates a dir storage pool (default) and a bridge network (lxdbr0).\nAdd User to LXD Group:\nsudo usermod -aG lxd ubuntu newgrp lxd Verify LXD:\nlxc list Should display an empty table initially. 2. Create a Kubernetes Profile for LXC Containers Create the Profile Configuration:\nSave this as k8s-profile.yaml:\nconfig: limits.cpu: \"2\" limits.memory: 2GB limits.memory.swap: \"false\" linux.kernel_modules: ip_tables,ip6_tables,nf_nat,overlay,br_netfilter raw.lxc: | lxc.apparmor.profile=unconfined lxc.cap.drop= lxc.cgroup.devices.allow=a lxc.mount.auto=proc:rw sys:rw security.privileged: \"true\" security.nesting: \"true\" security.syscalls.intercept.mknod: \"true\" security.syscalls.intercept.setxattr: \"true\" description: LXD profile for Kubernetes devices: eth0: name: eth0 nictype: bridged parent: lxdbr0 type: nic kmsg: path: /dev/kmsg source: /dev/console type: unix-char root: path: / pool: default type: disk name: k8s used_by: [] This matches your lxc config show kmaster --expanded output, excluding volatile and proxy settings added later.\nApply the Profile:\nlxc profile create k8s lxc profile edit k8s \u003c k8s-profile.yaml Verify Profile:\nlxc profile show k8s 3. Launch LXC Containers with Ubuntu 24.04 Initialize Containers:\nlxc init ubuntu:24.04 kmaster --profile k8s lxc init ubuntu:24.04 kworker1 --profile k8s lxc init ubuntu:24.04 kworker2 --profile k8s Start Containers:\nlxc start kmaster lxc start kworker1 lxc start kworker2 Verify Containers:\nlxc list Example output (IPs will vary):\n+---------+---------+----------------------+------+-----------+-----------+ | NAME | STATE | IPV4 | IPV6 | TYPE | SNAPSHOTS | +---------+---------+----------------------+------+-----------+-----------+ | kmaster | RUNNING | 10.177.108.101 (eth0)| | CONTAINER | 0 | | kworker1| RUNNING | 10.177.108.79 (eth0) | | CONTAINER | 0 | | kworker2| RUNNING | 10.177.108.57 (eth0) | | CONTAINER | 0 | +---------+---------+----------------------+------+-----------+-----------+ 4. Install K3s and Join the Cluster Prepare kmaster:\nlxc exec kmaster -- bash -c \"apt update \u0026\u0026 apt install -y curl iptables\" Install K3s on kmaster:\nDisable Traefik to use NGINX Ingress later:\nlxc exec kmaster -- bash -c \"curl -sfL https://get.k3s.io | sh -s - server --disable=traefik --write-kubeconfig-mode 644\" Get Node Token:\nlxc exec kmaster -- cat /var/lib/rancher/k3s/server/node-token Save the token (e.g., K10...::server:...). Prepare and Join Worker Nodes:\nFor kworker1:\nlxc exec kworker1 -- bash -c \"apt update \u0026\u0026 apt install -y curl iptables\" lxc exec kworker1 -- bash -c \"curl -sfL https://get.k3s.io | K3S_URL=https://10.177.108.101:6443 K3S_TOKEN= sh -\" For kworker2:\nlxc exec kworker2 -- bash -c \"apt update \u0026\u0026 apt install -y curl iptables\" lxc exec kworker2 -- bash -c \"curl -sfL https://get.k3s.io | K3S_URL=https://10.177.108.101:6443 K3S_TOKEN= sh -\" Verify Cluster:\nlxc exec kmaster -- k3s kubectl get nodes Expected:\nNAME STATUS ROLES AGE VERSION kmaster Ready control-plane,master 5m v1.32.3+k3s1 kworker1 Ready 2m v1.32.3+k3s1 kworker2 Ready 1m v1.32.3+k3s1 Set Up Host Access:\nInstall kubectl on the host:\nsudo snap install kubectl --classic Copy kubeconfig:\nlxc file pull kmaster/etc/rancher/k3s/k3s.yaml ~/.kube/config Edit ~/.kube/config, replace 127.0.0.1 with 10.177.108.101:\nserver: https://10.177.108.101:6443 Test:\nkubectl get nodes Add Port Forwarding for K3s API:\nsudo iptables -t nat -A PREROUTING -p tcp --dport 6443 -j DNAT --to-destination 10.177.108.101:6443 sudo iptables -t nat -A POSTROUTING -j MASQUERADE sudo sysctl -w net.ipv4.ip_forward=1 5. Set Up NGINX Ingress and Deploy a Test Service Install Helm:\ncurl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/master/scripts/get-helm-3 sudo bash get_helm.sh Install NGINX Ingress:\nhelm repo add ingress-nginx https://kubernetes.github.io/ingress-nginx helm repo update helm install ingress-nginx ingress-nginx/ingress-nginx \\ --namespace ingress-nginx \\ --create-namespace \\ --set controller.service.type=LoadBalancer Add Proxy Devices for HTTP/HTTPS:\nBased on your lxc config show kmaster --expanded:\nlxc config device add kmaster http proxy listen=tcp:0.0.0.0:80 connect=tcp:127.0.0.1:80 lxc config device add kmaster https proxy listen=tcp:0.0.0.0:443 connect=tcp:127.0.0.1:443 Add Port Forwarding for HTTP/HTTPS:\nGet NGINX service IP:\nkubectl get svc -n ingress-nginx Example: 10.177.108.x. Forward ports:\nsudo iptables -t nat -A PREROUTING -p tcp --dport 80 -j DNAT --to-destination 10.177.108.x:80 sudo iptables -t nat -A PREROUTING -p tcp --dport 443 -j DNAT --to-destination 10.177.108.x:443 sudo iptables -t nat -A POSTROUTING -j MASQUERADE Deploy a Basic NGINX Test Service:\nCreate nginx-test.yaml:\napiVersion: apps/v1 kind: Deployment metadata: name: nginx-test namespace: default spec: replicas: 1 selector: matchLabels: app: nginx-test template: metadata: labels: app: nginx-test spec: containers: - name: nginx image: nginx:latest ports: - containerPort: 80 --- apiVersion: v1 kind: Service metadata: name: nginx-test namespace: default spec: ports: - port: 80 targetPort: 80 protocol: TCP selector: app: nginx-test --- apiVersion: networking.k8s.io/v1 kind: Ingress metadata: name: nginx-test namespace: default annotations: nginx.ingress.kubernetes.io/rewrite-target: / spec: ingressClassName: nginx rules: - host: nginx-test.local http: paths: - path: / pathType: Prefix backend: service: name: nginx-test port: number: 80 Apply:\nkubectl apply -f nginx-test.yaml Test the NGINX Service:\nUpdate /etc/hosts on your local machine (temporary workaround since nginx-test.local isn’t a real domain):\necho \" nginx-test.local\" | sudo tee -a /etc/hosts Use your Oracle Cloud instance’s public IP (e.g., curl ifconfig.me). Test:\ncurl http://nginx-test.local Should return the NGINX welcome page HTML. Conclusion You now have a K3s cluster running inside LXC containers managed by LXD, with NGINX Ingress and a basic NGINX test service accessible at http://nginx-test.local. This setup leverages your Oracle Cloud Free Tier instance efficiently, with Traefik disabled and NGINX handling ingress traffic.\n","wordCount":"888","inLanguage":"en","datePublished":"2025-04-21T17:35:27+05:30","dateModified":"2025-04-21T17:35:27+05:30","author":{"@type":"Person","name":"Shashank Rawlani"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.rawlani.com/posts/setting-up-lxd-lxc-and-k3s-with-a-basic-nginx-test-service/"},"publisher":{"@type":"Organization","name":"The world wide web, AI, me and my learnings!","logo":{"@type":"ImageObject","url":"https://blog.rawlani.com/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://blog.rawlani.com/ accesskey=h title="The world wide web, AI, me and my learnings! (Alt + H)">The world wide web, AI, me and my learnings!</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://blog.rawlani.com/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://blog.rawlani.com/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://blog.rawlani.com/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://blog.rawlani.com/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://shashank.rawlani.com/ title=Portfolio><span>Portfolio</span>&nbsp;
<svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://blog.rawlani.com/>Home</a>&nbsp;»&nbsp;<a href=https://blog.rawlani.com/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Setting Up Lxd Lxc and K3s With a Basic Nginx Test Service</h1><div class=post-meta><span title='2025-04-21 17:35:27 +0530 +0530'>April 21, 2025</span>&nbsp;·&nbsp;<span>5 min</span>&nbsp;·&nbsp;<span>Shashank Rawlani</span></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#prerequisites aria-label=Prerequisites>Prerequisites</a></li><li><a href=#1-install-lxd aria-label="1. Install LXD">1. Install LXD</a></li><li><a href=#2-create-a-kubernetes-profile-for-lxc-containers aria-label="2. Create a Kubernetes Profile for LXC Containers">2. Create a Kubernetes Profile for LXC Containers</a></li><li><a href=#3-launch-lxc-containers-with-ubuntu-2404 aria-label="3. Launch LXC Containers with Ubuntu 24.04">3. Launch LXC Containers with Ubuntu 24.04</a></li><li><a href=#4-install-k3s-and-join-the-cluster aria-label="4. Install K3s and Join the Cluster">4. Install K3s and Join the Cluster</a></li><li><a href=#5-set-up-nginx-ingress-and-deploy-a-test-service aria-label="5. Set Up NGINX Ingress and Deploy a Test Service">5. Set Up NGINX Ingress and Deploy a Test Service</a></li><li><a href=#conclusion aria-label=Conclusion>Conclusion</a></li></ul></div></details></div><div class=post-content><p>This guide details how to set up a lightweight Kubernetes (K3s) cluster using LXD and LXC containers on an Ubuntu 24.04 server, followed by deploying a basic NGINX test service with NGINX Ingress. These steps were tested on an Oracle Cloud Free Tier instance named <code>maata-paarvati</code> with 4 CPUs and 24 GB RAM.</p><h2 id=prerequisites>Prerequisites<a hidden class=anchor aria-hidden=true href=#prerequisites>#</a></h2><ul><li>An Ubuntu 24.04 server (e.g., Oracle Cloud Free Tier instance).</li><li>Root or sudo access.</li><li>Network configured to allow TCP ports 80, 443, and 6443.</li></ul><hr><h2 id=1-install-lxd>1. Install LXD<a hidden class=anchor aria-hidden=true href=#1-install-lxd>#</a></h2><ol><li><p><strong>Install LXD via Snap</strong>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo snap install lxd
</span></span></code></pre></div></li><li><p><strong>Initialize LXD</strong>:</p><ul><li><p>Use default settings for a simple setup:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo lxd init --auto
</span></span></code></pre></div></li><li><p>This creates a <code>dir</code> storage pool (<code>default</code>) and a bridge network (<code>lxdbr0</code>).</p></li></ul></li><li><p><strong>Add User to LXD Group</strong>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo usermod -aG lxd ubuntu
</span></span><span style=display:flex><span>newgrp lxd
</span></span></code></pre></div></li><li><p><strong>Verify LXD</strong>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>lxc list
</span></span></code></pre></div><ul><li>Should display an empty table initially.</li></ul></li></ol><hr><h2 id=2-create-a-kubernetes-profile-for-lxc-containers>2. Create a Kubernetes Profile for LXC Containers<a hidden class=anchor aria-hidden=true href=#2-create-a-kubernetes-profile-for-lxc-containers>#</a></h2><ol><li><p><strong>Create the Profile Configuration</strong>:</p><ul><li><p>Save this as <code>k8s-profile.yaml</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>config</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>limits.cpu</span>: <span style=color:#e6db74>&#34;2&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>limits.memory</span>: <span style=color:#ae81ff>2GB</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>limits.memory.swap</span>: <span style=color:#e6db74>&#34;false&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>linux.kernel_modules</span>: <span style=color:#ae81ff>ip_tables,ip6_tables,nf_nat,overlay,br_netfilter</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>raw.lxc</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    lxc.apparmor.profile=unconfined
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    lxc.cap.drop=
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    lxc.cgroup.devices.allow=a
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    lxc.mount.auto=proc:rw sys:rw</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>security.privileged</span>: <span style=color:#e6db74>&#34;true&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>security.nesting</span>: <span style=color:#e6db74>&#34;true&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>security.syscalls.intercept.mknod</span>: <span style=color:#e6db74>&#34;true&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>security.syscalls.intercept.setxattr</span>: <span style=color:#e6db74>&#34;true&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>description</span>: <span style=color:#ae81ff>LXD profile for Kubernetes</span>
</span></span><span style=display:flex><span><span style=color:#f92672>devices</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>eth0</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>name</span>: <span style=color:#ae81ff>eth0</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>nictype</span>: <span style=color:#ae81ff>bridged</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>parent</span>: <span style=color:#ae81ff>lxdbr0</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>nic</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>kmsg</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>path</span>: <span style=color:#ae81ff>/dev/kmsg</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>source</span>: <span style=color:#ae81ff>/dev/console</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>unix-char</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>root</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>path</span>: <span style=color:#ae81ff>/</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>pool</span>: <span style=color:#ae81ff>default</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>disk</span>
</span></span><span style=display:flex><span><span style=color:#f92672>name</span>: <span style=color:#ae81ff>k8s</span>
</span></span><span style=display:flex><span><span style=color:#f92672>used_by</span>: []
</span></span></code></pre></div></li><li><p>This matches your <code>lxc config show kmaster --expanded</code> output, excluding volatile and proxy settings added later.</p></li></ul></li><li><p><strong>Apply the Profile</strong>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>lxc profile create k8s
</span></span><span style=display:flex><span>lxc profile edit k8s &lt; k8s-profile.yaml
</span></span></code></pre></div></li><li><p><strong>Verify Profile</strong>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>lxc profile show k8s
</span></span></code></pre></div></li></ol><hr><h2 id=3-launch-lxc-containers-with-ubuntu-2404>3. Launch LXC Containers with Ubuntu 24.04<a hidden class=anchor aria-hidden=true href=#3-launch-lxc-containers-with-ubuntu-2404>#</a></h2><ol><li><p><strong>Initialize Containers</strong>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>lxc init ubuntu:24.04 kmaster --profile k8s
</span></span><span style=display:flex><span>lxc init ubuntu:24.04 kworker1 --profile k8s
</span></span><span style=display:flex><span>lxc init ubuntu:24.04 kworker2 --profile k8s
</span></span></code></pre></div></li><li><p><strong>Start Containers</strong>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>lxc start kmaster
</span></span><span style=display:flex><span>lxc start kworker1
</span></span><span style=display:flex><span>lxc start kworker2
</span></span></code></pre></div></li><li><p><strong>Verify Containers</strong>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>lxc list
</span></span></code></pre></div><ul><li><p>Example output (IPs will vary):</p><pre tabindex=0><code>+---------+---------+----------------------+------+-----------+-----------+
|  NAME   |  STATE  |         IPV4         | IPV6 |   TYPE    | SNAPSHOTS |
+---------+---------+----------------------+------+-----------+-----------+
| kmaster | RUNNING | 10.177.108.101 (eth0)|      | CONTAINER | 0         |
| kworker1| RUNNING | 10.177.108.79 (eth0) |      | CONTAINER | 0         |
| kworker2| RUNNING | 10.177.108.57 (eth0) |      | CONTAINER | 0         |
+---------+---------+----------------------+------+-----------+-----------+
</code></pre></li></ul></li></ol><hr><h2 id=4-install-k3s-and-join-the-cluster>4. Install K3s and Join the Cluster<a hidden class=anchor aria-hidden=true href=#4-install-k3s-and-join-the-cluster>#</a></h2><ol><li><p><strong>Prepare</strong> <code>kmaster</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>lxc exec kmaster -- bash -c <span style=color:#e6db74>&#34;apt update &amp;&amp; apt install -y curl iptables&#34;</span>
</span></span></code></pre></div></li><li><p><strong>Install K3s on</strong> <code>kmaster</code>:</p><ul><li><p>Disable Traefik to use NGINX Ingress later:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>lxc exec kmaster -- bash -c <span style=color:#e6db74>&#34;curl -sfL https://get.k3s.io | sh -s - server --disable=traefik --write-kubeconfig-mode 644&#34;</span>
</span></span></code></pre></div></li></ul></li><li><p><strong>Get Node Token</strong>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>lxc exec kmaster -- cat /var/lib/rancher/k3s/server/node-token
</span></span></code></pre></div><ul><li>Save the token (e.g., <code>K10...::server:...</code>).</li></ul></li><li><p><strong>Prepare and Join Worker Nodes</strong>:</p><ul><li><p>For <code>kworker1</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>lxc exec kworker1 -- bash -c <span style=color:#e6db74>&#34;apt update &amp;&amp; apt install -y curl iptables&#34;</span>
</span></span><span style=display:flex><span>lxc exec kworker1 -- bash -c <span style=color:#e6db74>&#34;curl -sfL https://get.k3s.io | K3S_URL=https://10.177.108.101:6443 K3S_TOKEN=&lt;node-token&gt; sh -&#34;</span>
</span></span></code></pre></div></li><li><p>For <code>kworker2</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>lxc exec kworker2 -- bash -c <span style=color:#e6db74>&#34;apt update &amp;&amp; apt install -y curl iptables&#34;</span>
</span></span><span style=display:flex><span>lxc exec kworker2 -- bash -c <span style=color:#e6db74>&#34;curl -sfL https://get.k3s.io | K3S_URL=https://10.177.108.101:6443 K3S_TOKEN=&lt;node-token&gt; sh -&#34;</span>
</span></span></code></pre></div></li></ul></li><li><p><strong>Verify Cluster</strong>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>lxc exec kmaster -- k3s kubectl get nodes
</span></span></code></pre></div><ul><li><p>Expected:</p><pre tabindex=0><code>NAME       STATUS   ROLES                  AGE   VERSION
kmaster    Ready    control-plane,master   5m    v1.32.3+k3s1
kworker1   Ready    &lt;none&gt;                 2m    v1.32.3+k3s1
kworker2   Ready    &lt;none&gt;                 1m    v1.32.3+k3s1
</code></pre></li></ul></li><li><p><strong>Set Up Host Access</strong>:</p><ul><li><p>Install <code>kubectl</code> on the host:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo snap install kubectl --classic
</span></span></code></pre></div></li><li><p>Copy kubeconfig:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>lxc file pull kmaster/etc/rancher/k3s/k3s.yaml ~/.kube/config
</span></span></code></pre></div></li><li><p>Edit <code>~/.kube/config</code>, replace <code>127.0.0.1</code> with <code>10.177.108.101</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>server</span>: <span style=color:#ae81ff>https://10.177.108.101:6443</span>
</span></span></code></pre></div></li><li><p>Test:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl get nodes
</span></span></code></pre></div></li></ul></li><li><p><strong>Add Port Forwarding for K3s API</strong>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo iptables -t nat -A PREROUTING -p tcp --dport <span style=color:#ae81ff>6443</span> -j DNAT --to-destination 10.177.108.101:6443
</span></span><span style=display:flex><span>sudo iptables -t nat -A POSTROUTING -j MASQUERADE
</span></span><span style=display:flex><span>sudo sysctl -w net.ipv4.ip_forward<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>
</span></span></code></pre></div></li></ol><hr><h2 id=5-set-up-nginx-ingress-and-deploy-a-test-service>5. Set Up NGINX Ingress and Deploy a Test Service<a hidden class=anchor aria-hidden=true href=#5-set-up-nginx-ingress-and-deploy-a-test-service>#</a></h2><ol><li><p><strong>Install Helm</strong>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/master/scripts/get-helm-3
</span></span><span style=display:flex><span>sudo bash get_helm.sh
</span></span></code></pre></div></li><li><p><strong>Install NGINX Ingress</strong>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>helm repo add ingress-nginx https://kubernetes.github.io/ingress-nginx
</span></span><span style=display:flex><span>helm repo update
</span></span><span style=display:flex><span>helm install ingress-nginx ingress-nginx/ingress-nginx <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --namespace ingress-nginx <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --create-namespace <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --set controller.service.type<span style=color:#f92672>=</span>LoadBalancer
</span></span></code></pre></div></li><li><p><strong>Add Proxy Devices for HTTP/HTTPS</strong>:</p><ul><li><p>Based on your <code>lxc config show kmaster --expanded</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>lxc config device add kmaster http proxy listen<span style=color:#f92672>=</span>tcp:0.0.0.0:80 connect<span style=color:#f92672>=</span>tcp:127.0.0.1:80
</span></span><span style=display:flex><span>lxc config device add kmaster https proxy listen<span style=color:#f92672>=</span>tcp:0.0.0.0:443 connect<span style=color:#f92672>=</span>tcp:127.0.0.1:443
</span></span></code></pre></div></li></ul></li><li><p><strong>Add Port Forwarding for HTTP/HTTPS</strong>:</p><ul><li><p>Get NGINX service IP:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl get svc -n ingress-nginx
</span></span></code></pre></div><ul><li>Example: <code>10.177.108.x</code>.</li></ul></li><li><p>Forward ports:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo iptables -t nat -A PREROUTING -p tcp --dport <span style=color:#ae81ff>80</span> -j DNAT --to-destination 10.177.108.x:80
</span></span><span style=display:flex><span>sudo iptables -t nat -A PREROUTING -p tcp --dport <span style=color:#ae81ff>443</span> -j DNAT --to-destination 10.177.108.x:443
</span></span><span style=display:flex><span>sudo iptables -t nat -A POSTROUTING -j MASQUERADE
</span></span></code></pre></div></li></ul></li><li><p><strong>Deploy a Basic NGINX Test Service</strong>:</p><ul><li><p>Create <code>nginx-test.yaml</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>apps/v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Deployment</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>nginx-test</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>default</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>replicas</span>: <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>selector</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>matchLabels</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>app</span>: <span style=color:#ae81ff>nginx-test</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>template</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>labels</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>app</span>: <span style=color:#ae81ff>nginx-test</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>containers</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>nginx</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>image</span>: <span style=color:#ae81ff>nginx:latest</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>        - <span style=color:#f92672>containerPort</span>: <span style=color:#ae81ff>80</span>
</span></span><span style=display:flex><span>---
</span></span><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Service</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>nginx-test</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>default</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>port</span>: <span style=color:#ae81ff>80</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>targetPort</span>: <span style=color:#ae81ff>80</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>protocol</span>: <span style=color:#ae81ff>TCP</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>selector</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>app</span>: <span style=color:#ae81ff>nginx-test</span>
</span></span><span style=display:flex><span>---
</span></span><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>networking.k8s.io/v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Ingress</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>nginx-test</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>default</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>annotations</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>nginx.ingress.kubernetes.io/rewrite-target</span>: <span style=color:#ae81ff>/</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>ingressClassName</span>: <span style=color:#ae81ff>nginx</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>rules</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>host</span>: <span style=color:#ae81ff>nginx-test.local</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>http</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>paths</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>path</span>: <span style=color:#ae81ff>/</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>pathType</span>: <span style=color:#ae81ff>Prefix</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>backend</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>service</span>:
</span></span><span style=display:flex><span>            <span style=color:#f92672>name</span>: <span style=color:#ae81ff>nginx-test</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>port</span>:
</span></span><span style=display:flex><span>              <span style=color:#f92672>number</span>: <span style=color:#ae81ff>80</span>
</span></span></code></pre></div></li><li><p>Apply:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl apply -f nginx-test.yaml
</span></span></code></pre></div></li></ul></li><li><p><strong>Test the NGINX Service</strong>:</p><ul><li><p>Update <code>/etc/hosts</code> on your local machine (temporary workaround since <code>nginx-test.local</code> isn’t a real domain):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>echo <span style=color:#e6db74>&#34;&lt;public-ip&gt; nginx-test.local&#34;</span> | sudo tee -a /etc/hosts
</span></span></code></pre></div><ul><li>Use your Oracle Cloud instance’s public IP (e.g., <code>curl ifconfig.me</code>).</li></ul></li><li><p>Test:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl http://nginx-test.local
</span></span></code></pre></div><ul><li>Should return the NGINX welcome page HTML.</li></ul></li></ul></li></ol><hr><h2 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h2><p>You now have a K3s cluster running inside LXC containers managed by LXD, with NGINX Ingress and a basic NGINX test service accessible at <code>http://nginx-test.local</code>. This setup leverages your Oracle Cloud Free Tier instance efficiently, with Traefik disabled and NGINX handling ingress traffic.</p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=next href=https://blog.rawlani.com/posts/lxc-vs-lxd/><span class=title>Next »</span><br><span>LXC vs. LXD: Understanding the Differences and Choosing the Right Tool</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Setting Up Lxd Lxc and K3s With a Basic Nginx Test Service on x" href="https://x.com/intent/tweet/?text=Setting%20Up%20Lxd%20Lxc%20and%20K3s%20With%20a%20Basic%20Nginx%20Test%20Service&amp;url=https%3a%2f%2fblog.rawlani.com%2fposts%2fsetting-up-lxd-lxc-and-k3s-with-a-basic-nginx-test-service%2f&amp;hashtags="><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Setting Up Lxd Lxc and K3s With a Basic Nginx Test Service on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fblog.rawlani.com%2fposts%2fsetting-up-lxd-lxc-and-k3s-with-a-basic-nginx-test-service%2f&amp;title=Setting%20Up%20Lxd%20Lxc%20and%20K3s%20With%20a%20Basic%20Nginx%20Test%20Service&amp;summary=Setting%20Up%20Lxd%20Lxc%20and%20K3s%20With%20a%20Basic%20Nginx%20Test%20Service&amp;source=https%3a%2f%2fblog.rawlani.com%2fposts%2fsetting-up-lxd-lxc-and-k3s-with-a-basic-nginx-test-service%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Setting Up Lxd Lxc and K3s With a Basic Nginx Test Service on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fblog.rawlani.com%2fposts%2fsetting-up-lxd-lxc-and-k3s-with-a-basic-nginx-test-service%2f&title=Setting%20Up%20Lxd%20Lxc%20and%20K3s%20With%20a%20Basic%20Nginx%20Test%20Service"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Setting Up Lxd Lxc and K3s With a Basic Nginx Test Service on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.rawlani.com%2fposts%2fsetting-up-lxd-lxc-and-k3s-with-a-basic-nginx-test-service%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Setting Up Lxd Lxc and K3s With a Basic Nginx Test Service on whatsapp" href="https://api.whatsapp.com/send?text=Setting%20Up%20Lxd%20Lxc%20and%20K3s%20With%20a%20Basic%20Nginx%20Test%20Service%20-%20https%3a%2f%2fblog.rawlani.com%2fposts%2fsetting-up-lxd-lxc-and-k3s-with-a-basic-nginx-test-service%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Setting Up Lxd Lxc and K3s With a Basic Nginx Test Service on telegram" href="https://telegram.me/share/url?text=Setting%20Up%20Lxd%20Lxc%20and%20K3s%20With%20a%20Basic%20Nginx%20Test%20Service&amp;url=https%3a%2f%2fblog.rawlani.com%2fposts%2fsetting-up-lxd-lxc-and-k3s-with-a-basic-nginx-test-service%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentColor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Setting Up Lxd Lxc and K3s With a Basic Nginx Test Service on ycombinator" href="https://news.ycombinator.com/submitlink?t=Setting%20Up%20Lxd%20Lxc%20and%20K3s%20With%20a%20Basic%20Nginx%20Test%20Service&u=https%3a%2f%2fblog.rawlani.com%2fposts%2fsetting-up-lxd-lxc-and-k3s-with-a-basic-nginx-test-service%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://blog.rawlani.com/>The world wide web, AI, me and my learnings!</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>